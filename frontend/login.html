<!DOCTYPE html>
<html lang="pt-br">
	<head>
		<title>Five Jeans | Login</title>
		<link
			rel="stylesheet"
			type="text/css"
			href="./node_modules/bootstrap/dist/css/bootstrap.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="./estilos/login.css" />
		<link rel="stylesheet" type="text/css" href="./estilos/estilo.css" />
	</head>
	<body>
		<div class="divGlobal col-12">
			<div class="divPrimaria"></div>
			<div class="divSecundaria">
				<form class="form col-10" onsubmit="handleClick(event)">
					<div
						class="d-flex justify-content-center align-items-center"
					>
						<img
							src="./imagens/logohome.png"
							width="250"
							height="250"
						/>
					</div>
					<div class="col-12 row">
						<div class="col-6 divBotaoLogin">
							<a class="btn btn-primary active" href="login.html"
								>Login</a
							>
						</div>
						<br />
						<div class="col-6 divBotaoRegistrar">
							<a class="btn btn-primary" href="registrar.html"
								>Registre-se</a
							>
						</div>
						<br />
						<br />
						<br />
					</div>
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">E-mail</span>
						</div>
						<input
							required
							type="email"
							id="email"
							class="form-control"
							aria-label="Default"
							aria-describedby=""
						/>
					</div>
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<span
								class="input-group-text"
								id="inputGroup-sizing-default"
								>Senha</span
							>
						</div>
						<input
							required
							id="password"
							type="password"
							class="form-control"
							aria-label="Default"
							aria-describedby="inputGroup-sizing-default"
						/>
					</div>

					<span id="error"></span>

					<div class="divComplementos">
						<div class="form-check form-switch">
							<input
								class="form-check-input"
								type="checkbox"
								id="flexSwitchCheckChecked"
								checked
							/>
							<label
								class="form-check-label"
								for="flexSwitchCheckChecked"
								>Lembrar senha</label
							>
						</div>
					</div>
					<div class="col-12 divBotao">
						<br />
						<button class="btn btn-primary" type="submit">
							Conectar
						</button>
					</div>
				</form>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
		<script>
			async function handleClick(event) {
				event.preventDefault();

				const email = document.getElementById("email").value;
				const password = document.getElementById("password").value;

				const response = await axios
					.post("http://localhost:3333/sessions", {
						email,
						password,
					})
					.catch((error) => {
						if (error.response.status === 401) {
							document.getElementById("error").innerHTML =
								"Email ou senha incorreta";
						}
					});

				window.location = "/";
			}
		</script>
	</body>
</html>
